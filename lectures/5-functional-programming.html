<!DOCTYPE html>
<html lang="en"><head>
<script src="5-functional-programming_files/libs/clipboard/clipboard.min.js"></script>
<script src="5-functional-programming_files/libs/quarto-html/tabby.min.js"></script>
<script src="5-functional-programming_files/libs/quarto-html/popper.min.js"></script>
<script src="5-functional-programming_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="5-functional-programming_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="5-functional-programming_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="5-functional-programming_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="5-functional-programming_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.5.55">

  <meta name="author" content="Alejandro Schuler">
  <title>Functional Programming</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="5-functional-programming_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="5-functional-programming_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="5-functional-programming_files/libs/revealjs/dist/theme/quarto.css">
  <link href="5-functional-programming_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="5-functional-programming_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="5-functional-programming_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="5-functional-programming_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Functional Programming</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Alejandro Schuler 
</div>
</div>
</div>

</section>
<section id="learning-goals" class="slide level2">
<h2>Learning Goals:</h2>
<ul>
<li>write and test your own functions</li>
<li>iterate functions over lists of arguments</li>
</ul>
</section>
<section>
<section id="writing-functions" class="title-slide slide level1 center" data-background-color="black">
<h1>Writing functions</h1>

</section>
<section id="motivation" class="slide level2">
<h2>Motivation</h2>
<ul>
<li>It’s handy to be able to reuse your code and automate repetitive tasks</li>
<li>Writing your own functions allows you to do that</li>
<li>When you write your code as functions, you can
<ul>
<li>name the function something evocative and readable</li>
<li>update the code in a single place instead of many</li>
<li>reduce the chance of making mistakes while copy-pasting</li>
<li>make your code shorter overall</li>
</ul></li>
</ul>
</section>
<section class="slide level2">

<p>What does this code do? (note that <code>df$col</code> is a shortcut for <code>df |&gt; pull(col)</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href=""></a>df <span class="ot">=</span> <span class="fu">tibble</span>(</span>
<span id="cb1-2"><a href=""></a>  <span class="at">a =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>), <span class="co"># 10 random numbers </span></span>
<span id="cb1-3"><a href=""></a>  <span class="at">b =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb1-4"><a href=""></a>  <span class="at">c =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb1-5"><a href=""></a>  <span class="at">d =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>)</span>
<span id="cb1-6"><a href=""></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href=""></a>df<span class="sc">$</span>a <span class="ot">=</span> (df<span class="sc">$</span>a <span class="sc">-</span> <span class="fu">min</span>(df<span class="sc">$</span>a, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">/</span> </span>
<span id="cb2-2"><a href=""></a>  (<span class="fu">max</span>(df<span class="sc">$</span>a, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">-</span> <span class="fu">min</span>(df<span class="sc">$</span>a, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb2-3"><a href=""></a>df<span class="sc">$</span>b <span class="ot">=</span> (df<span class="sc">$</span>b <span class="sc">-</span> <span class="fu">min</span>(df<span class="sc">$</span>b, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">/</span> </span>
<span id="cb2-4"><a href=""></a>  (<span class="fu">max</span>(df<span class="sc">$</span>b, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">-</span> <span class="fu">min</span>(df<span class="sc">$</span>a, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb2-5"><a href=""></a>df<span class="sc">$</span>c <span class="ot">=</span> (df<span class="sc">$</span>c <span class="sc">-</span> <span class="fu">min</span>(df<span class="sc">$</span>c, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">/</span> </span>
<span id="cb2-6"><a href=""></a>  (<span class="fu">max</span>(df<span class="sc">$</span>c, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">-</span> <span class="fu">min</span>(df<span class="sc">$</span>c, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb2-7"><a href=""></a>df<span class="sc">$</span>d <span class="ot">=</span> (df<span class="sc">$</span>d <span class="sc">-</span> <span class="fu">min</span>(df<span class="sc">$</span>d, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">/</span> </span>
<span id="cb2-8"><a href=""></a>  (<span class="fu">max</span>(df<span class="sc">$</span>d, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">-</span> <span class="fu">min</span>(df<span class="sc">$</span>d, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<ul>
<li>It looks like we’re standardizing all the variables by their range so that they fall between 0 and 1</li>
<li>But did you spot the mistake? The code runs with no errors…</li>
</ul>
</div>
</section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href=""></a>rescale <span class="ot">=</span> <span class="cf">function</span>(vec) {</span>
<span id="cb3-2"><a href=""></a>  (vec <span class="sc">-</span> <span class="fu">min</span>(vec))<span class="sc">/</span>(<span class="fu">max</span>(vec) <span class="sc">-</span> <span class="fu">min</span>(vec))</span>
<span id="cb3-3"><a href=""></a>}</span>
<span id="cb3-4"><a href=""></a></span>
<span id="cb3-5"><a href=""></a>df2 <span class="ot">=</span> df <span class="sc">|&gt;</span></span>
<span id="cb3-6"><a href=""></a>  <span class="fu">mutate</span>(</span>
<span id="cb3-7"><a href=""></a>    <span class="at">a=</span> <span class="fu">rescale</span>(a),</span>
<span id="cb3-8"><a href=""></a>    <span class="at">b=</span> <span class="fu">rescale</span>(b),</span>
<span id="cb3-9"><a href=""></a>    <span class="at">c=</span> <span class="fu">rescale</span>(c),</span>
<span id="cb3-10"><a href=""></a>    <span class="at">d=</span> <span class="fu">rescale</span>(d),</span>
<span id="cb3-11"><a href=""></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Much improved!</li>
<li>The last two lines clearly say: replace all the columns with their rescaled versions
<ul>
<li>This is because the function name <code>rescale()</code> is informative and communicates what it does</li>
<li>If a user (or you a few weeks later) is curious about the specifics, they can check the function body</li>
</ul></li>
</ul>
</section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href=""></a>rescale <span class="ot">=</span> <span class="cf">function</span>(vec) {</span>
<span id="cb4-2"><a href=""></a>  (vec <span class="sc">-</span> <span class="fu">min</span>(vec))<span class="sc">/</span>(<span class="fu">max</span>(vec) <span class="sc">-</span> <span class="fu">min</span>(vec))</span>
<span id="cb4-3"><a href=""></a>}</span>
<span id="cb4-4"><a href=""></a></span>
<span id="cb4-5"><a href=""></a>df2 <span class="ot">=</span> df <span class="sc">|&gt;</span></span>
<span id="cb4-6"><a href=""></a>  <span class="fu">mutate</span>(</span>
<span id="cb4-7"><a href=""></a>    <span class="fu">across</span>(a<span class="sc">:</span>d, rescale)</span>
<span id="cb4-8"><a href=""></a>  ) <span class="co"># see ?across</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Even better.</li>
<li>… now we notice that <code>min()</code> is being computed twice in the function body, which is inefficient</li>
<li>We are also not accounting for NAs</li>
</ul>
</section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href=""></a>rescale <span class="ot">=</span> <span class="cf">function</span>(vec) {</span>
<span id="cb5-2"><a href=""></a>  vec_rng <span class="ot">=</span> <span class="fu">range</span>(vec, <span class="at">na.rm=</span>T) <span class="co"># same as c(min(vec,na.rm=T), max(vec,na.rm=T))</span></span>
<span id="cb5-3"><a href=""></a>  (vec <span class="sc">-</span> vec_rng[<span class="dv">1</span>])<span class="sc">/</span>(vec_rng[<span class="dv">2</span>] <span class="sc">-</span> vec_rng[<span class="dv">1</span>])</span>
<span id="cb5-4"><a href=""></a>}</span>
<span id="cb5-5"><a href=""></a></span>
<span id="cb5-6"><a href=""></a>df2 <span class="ot">=</span> df <span class="sc">|&gt;</span></span>
<span id="cb5-7"><a href=""></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(a<span class="sc">:</span>d, rescale))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Since we have a function, we can make the change in a single place and improve the efficiency of multiple parts of our code</li>
<li>Bonus question: why use <code>range()</code> instead of getting and saving the results of <code>min()</code> and <code>max()</code> separately?</li>
</ul>
</section>
<section class="slide level2">

<p>We can also test our function in cases where we know what the output should be to make sure it works as intended before we let it loose on the real data</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href=""></a><span class="fu">rescale</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0 0 0 0 0 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href=""></a><span class="fu">rescale</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 0.0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href=""></a><span class="fu">rescale</span>(<span class="sc">-</span><span class="dv">10</span><span class="sc">:</span><span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 0.0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href=""></a>x <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="fu">runif</span>(<span class="dv">100</span>))</span>
<span id="cb12-2"><a href=""></a><span class="fu">all</span>(x <span class="sc">==</span> <span class="fu">rescale</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<ul>
<li>These tests are a critical part of writing good code! It is helpful to save your tests in a separate file and organize them as you go</li>
</ul>
</section>
<section id="function-declaration-syntax" class="slide level2">
<h2>Function declaration syntax</h2>
<div class="columns">
<div class="column">
<p>To write a function, just wrap your code in some special syntax that tells it what variables will be passed in and what will be returned</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href=""></a>rescale <span class="ot">=</span> <span class="cf">function</span>(x) {</span>
<span id="cb14-2"><a href=""></a>  x_rng <span class="ot">=</span> <span class="fu">range</span>(x, <span class="at">na.rm=</span>T) </span>
<span id="cb14-3"><a href=""></a>  (x <span class="sc">-</span> x_rng[<span class="dv">1</span>])<span class="sc">/</span>(x_rng[<span class="dv">2</span>] <span class="sc">-</span> x_rng[<span class="dv">1</span>])</span>
<span id="cb14-4"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Just like assigning a variable, except what you put into <code>FUNCTION_NAME</code> now isn’t a data frame, vector, etc, it’s a function object that gets created by the <code>function(..) {...}</code> syntax</li>
<li>At any point in the body you can <code>return()</code> the value, or R will automatically return the result of the last line of code in the body that gets run</li>
<li>once declared, it can be called:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href=""></a><span class="fu">rescale</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 0.0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.0</code></pre>
</div>
</div>
</div><div class="column">
<ul>
<li>The syntax is <code>FUNCTION_NAME &lt;- function(ARGUMENTS...) { CODE }</code></li>
<li>what you call the arguments that go in the <code>function(...)</code> part is how the function will refer to these inputs internally and specify how it should be called using named arguments</li>
</ul>
<p><img data-src="https://github.com/alejandroschuler/r4ds-courses/blob/summer-2023/figures/call.png?raw=true"></p>
<pre><code>aes = function(x,y) {...} # defining 
aes(x=EIF3L, y=VAPA) # calling </code></pre>
</div></div>
</section>
<section id="optional-arguments" class="slide level2">
<h2>Optional arguments</h2>
<p>To add an <strong>optional</strong> argument, add an <code>=</code> after you declare it as a variable and write in the default value that you would like that variable to take</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href=""></a>rescale <span class="ot">=</span> <span class="cf">function</span>(x, <span class="at">na.rm=</span><span class="cn">TRUE</span>) {</span>
<span id="cb18-2"><a href=""></a>  x_rng <span class="ot">=</span> <span class="fu">range</span>(x, <span class="at">na.rm=</span>na.rm) </span>
<span id="cb18-3"><a href=""></a>  (x <span class="sc">-</span> x_rng[<span class="dv">1</span>])<span class="sc">/</span>(x_rng[<span class="dv">2</span>] <span class="sc">-</span> x_rng[<span class="dv">1</span>])</span>
<span id="cb18-4"><a href=""></a>}</span>
<span id="cb18-5"><a href=""></a></span>
<span id="cb18-6"><a href=""></a>vec <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="cn">NA</span>)</span>
<span id="cb18-7"><a href=""></a></span>
<span id="cb18-8"><a href=""></a><span class="fu">rescale</span>(vec)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  0  1 NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href=""></a><span class="fu">rescale</span>(vec, <span class="at">na.rm=</span>T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  0  1 NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href=""></a><span class="fu">rescale</span>(vec, <span class="at">na.rm=</span>F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA NA NA</code></pre>
</div>
</div>
<ul>
<li>All optional arguments must go after mandatory arguments in the function declaration</li>
</ul>
</section>
<section id="exercise-reverse" class="slide level2" data-background-color="teal">
<h2>Exercise: Reverse</h2>
<ul>
<li>write a function that takes a single vector or list as input and returns it in reverse order</li>
</ul>
</section>
<section id="exercise-hardcoding-na.rm" class="slide level2" data-background-color="teal">
<h2>Exercise: Hardcoding na.rm</h2>
<p>type:prompt - It’s annoying that the <code>sum()</code> function returns <code>NA</code> if any values of the input vector are <code>NA</code>. You can fix this by passing in the optional argument <code>na.rm=T</code> every time you call <code>sum()</code>, but it’s inconvenient to type that every single time. - Write a new function (called <code>sum_obs()</code>, short for “sum observed”) that takes a vector and returns the sum of all the non-NA values. Your function should call the usual <code>sum()</code> internally.</p>
</section>
<section id="exercise-nas-in-two-vectors" class="slide level2" data-background-color="teal">
<h2>Exercise: NAs in two vectors</h2>
<p>type: prompt - Write a function called both_na() that takes two vectors of the same length and returns the total number of positions that have an NA in both vectors - Make a few vectors and test out your code</p>
</section>
<section id="returning-multiple-values" class="slide level2">
<h2>Returning multiple values</h2>
<ul>
<li>A function can only return a single object</li>
<li>Often, however, it makes sense to group the calculation of two or more things you want to return within a single function</li>
<li>You can put all of that into a list and then return a single list</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href=""></a>min_max <span class="ot">=</span> <span class="cf">function</span>(x) {</span>
<span id="cb24-2"><a href=""></a>  x_sorted <span class="ot">=</span> <span class="fu">sort</span>(x)</span>
<span id="cb24-3"><a href=""></a>  <span class="fu">list</span>(</span>
<span id="cb24-4"><a href=""></a>    <span class="at">min =</span> x_sorted[<span class="dv">1</span>],</span>
<span id="cb24-5"><a href=""></a>    <span class="at">max =</span> x_sorted[<span class="fu">length</span>(x)]</span>
<span id="cb24-6"><a href=""></a>  )</span>
<span id="cb24-7"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Why might this code be preferable to running <code>min()</code> and then <code>max()</code>?</li>
</ul>
</section>
<section id="functions-are-objects" class="slide level2">
<h2>Functions are objects</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href=""></a>rescale</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>function(x, na.rm=TRUE) {
  x_rng = range(x, na.rm=na.rm) 
  (x - x_rng[1])/(x_rng[2] - x_rng[1])
}
&lt;bytecode: 0x1323f6fc8&gt;</code></pre>
</div>
</div>
<ul>
<li>Because of this, they themselves can be passed as arguments to other functions</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href=""></a>df2 <span class="ot">=</span> df <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="fu">across</span>(a<span class="sc">:</span>d, rescale))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>This is what <strong>functional programming</strong> means. The functions themselves are can be treated as regular objects like variables</li>
<li>The name of the function is just what you call the “box” that the function (the code) lives in, just like variables names are names for “boxes” that contain data</li>
</ul>
</section></section>
<section>
<section id="iteration" class="title-slide slide level1 center" data-background-color="black">
<h1>Iteration</h1>

</section>
<section id="map" class="slide level2">
<h2>Map</h2>
<div class="columns">
<div class="column">
<ul>
<li>Map is a function that takes a list (or vector) as its first argument and a function as its second argument</li>
<li>Recall that functions are objects just like anything else so you can pass them around to other functions</li>
<li>Map then runs that function on each element of the first argument, slaps the results together into a list, and returns that</li>
</ul>
</div><div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href=""></a>grades <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb28-2"><a href=""></a>  <span class="at">class_A =</span> <span class="fu">c</span>(<span class="dv">90</span>, <span class="dv">87</span>, <span class="dv">92</span>, <span class="dv">78</span>, <span class="dv">69</span>),</span>
<span id="cb28-3"><a href=""></a>  <span class="at">class_B =</span> <span class="fu">c</span>(<span class="dv">88</span>, <span class="dv">85</span>, <span class="dv">76</span>, <span class="dv">78</span>, <span class="dv">77</span>, <span class="dv">97</span>, <span class="dv">91</span>)</span>
<span id="cb28-4"><a href=""></a>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>map preserves list names</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href=""></a>grades <span class="sc">|&gt;</span></span>
<span id="cb29-2"><a href=""></a>  <span class="fu">map</span>(max)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$class_A
[1] 92

$class_B
[1] 97</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href=""></a>grades <span class="sc">|&gt;</span></span>
<span id="cb31-2"><a href=""></a>  <span class="fu">map</span>(min)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$class_A
[1] 69

$class_B
[1] 76</code></pre>
</div>
</div>
</div></div>
</section>
<section class="slide level2">

<ul>
<li>as another example, let’s say you want to read in multiple files:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href=""></a>url_start <span class="ot">=</span> <span class="st">"https://raw.githubusercontent.com/alejandroschuler/r4ds-courses/summer-2023/data/gtex_metadata/"</span></span>
<span id="cb33-2"><a href=""></a>files <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb33-3"><a href=""></a>  <span class="at">samples =</span> <span class="st">"gtex_samples_time.csv"</span>,</span>
<span id="cb33-4"><a href=""></a>  <span class="at">tissues =</span> <span class="st">"gtex_tissue_month_year.csv"</span>,</span>
<span id="cb33-5"><a href=""></a>  <span class="at">dates =</span> <span class="st">"gtex_dates_clean.csv"</span></span>
<span id="cb33-6"><a href=""></a>)</span>
<span id="cb33-7"><a href=""></a></span>
<span id="cb33-8"><a href=""></a>urls <span class="ot">=</span> <span class="fu">str_c</span>(url_start, files)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href=""></a>data_frames <span class="ot">=</span> urls <span class="sc">|&gt;</span></span>
<span id="cb34-2"><a href=""></a>  <span class="fu">map</span>(read_csv)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="exercise-map-practice" class="slide level2" data-background-color="teal">
<h2>Exercise: map practice</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href=""></a>url_start <span class="ot">=</span> <span class="st">"https://raw.githubusercontent.com/alejandroschuler/r4ds-courses/summer-2023/data/gtex_metadata/"</span></span>
<span id="cb35-2"><a href=""></a></span>
<span id="cb35-3"><a href=""></a>data_frames <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb35-4"><a href=""></a>  <span class="at">samples =</span> <span class="st">"gtex_samples_time.csv"</span>,</span>
<span id="cb35-5"><a href=""></a>  <span class="at">tissues =</span> <span class="st">"gtex_tissue_month_year.csv"</span>,</span>
<span id="cb35-6"><a href=""></a>  <span class="at">dates =</span> <span class="st">"gtex_dates_clean.csv"</span></span>
<span id="cb35-7"><a href=""></a>)  <span class="sc">|&gt;</span> </span>
<span id="cb35-8"><a href=""></a>  <span class="fu">map</span>(\(f) <span class="fu">str_c</span>(url_start, f)) <span class="sc">|&gt;</span></span>
<span id="cb35-9"><a href=""></a>  <span class="fu">map</span>(read_csv)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>data_frames</code> is a list of three data frames. Use map to output:</p>
<ol type="1">
<li>the number of rows of each data frame</li>
<li>the number of columns of each data frame</li>
</ol>
</section>
<section id="anonymous-function-syntax" class="slide level2">
<h2>Anonymous function syntax</h2>
<ul>
<li>up until now we had to define our functions outside of map and then pass them in as an argument:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href=""></a>count_rc <span class="ot">=</span> <span class="cf">function</span>(df) {</span>
<span id="cb36-2"><a href=""></a>  <span class="fu">tibble</span>(</span>
<span id="cb36-3"><a href=""></a>    <span class="at">n_rows =</span> <span class="fu">nrow</span>(df),</span>
<span id="cb36-4"><a href=""></a>    <span class="at">n_cols =</span> <span class="fu">ncol</span>(df)</span>
<span id="cb36-5"><a href=""></a>  )</span>
<span id="cb36-6"><a href=""></a>}</span>
<span id="cb36-7"><a href=""></a></span>
<span id="cb36-8"><a href=""></a>data_frames <span class="sc">|&gt;</span></span>
<span id="cb36-9"><a href=""></a>  <span class="fu">map_df</span>(count_rc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Instead, we can define a function inside of another function call.</li>
<li>These functions are “anonymous” because they are never assigned a name and will not be used again</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href=""></a>data_frames <span class="sc">|&gt;</span></span>
<span id="cb37-2"><a href=""></a>  <span class="fu">map_df</span>(\(df) <span class="fu">tibble</span>(</span>
<span id="cb37-3"><a href=""></a>    <span class="at">n_rows =</span> <span class="fu">nrow</span>(df),</span>
<span id="cb37-4"><a href=""></a>    <span class="at">n_cols =</span> <span class="fu">ncol</span>(df)</span>
<span id="cb37-5"><a href=""></a>  ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>the syntax is <code>\(ARGUMENTS) BODY</code></li>
<li>just an abbreviation for <code>function(ARGUMENTS) {BODY}</code></li>
</ul>
</section>
<section id="exercise-read-files" class="slide level2" data-background-color="teal">
<h2>Exercise: read files</h2>
<p>Earlier we saw this example of reading in multiple files:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href=""></a>url_start <span class="ot">=</span> <span class="st">"https://raw.githubusercontent.com/alejandroschuler/r4ds-courses/summer-2023/data/gtex_metadata/"</span></span>
<span id="cb38-2"><a href=""></a></span>
<span id="cb38-3"><a href=""></a>data_frames <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb38-4"><a href=""></a>  <span class="at">samples =</span> <span class="st">"gtex_samples_time.csv"</span>,</span>
<span id="cb38-5"><a href=""></a>  <span class="at">tissues =</span> <span class="st">"gtex_tissue_month_year.csv"</span>,</span>
<span id="cb38-6"><a href=""></a>  <span class="at">dates =</span> <span class="st">"gtex_dates_clean.csv"</span></span>
<span id="cb38-7"><a href=""></a>)  <span class="sc">|&gt;</span> </span>
<span id="cb38-8"><a href=""></a>  <span class="fu">map</span>(\(f) <span class="fu">str_c</span>(url_start, f)) <span class="sc">|&gt;</span></span>
<span id="cb38-9"><a href=""></a>  <span class="fu">map</span>(read_csv)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>modify the code so that only the first 10 lines of each file are read in.</li>
</ul>
</section>
<section id="returning-other-data-types" class="slide level2">
<h2>Returning other data types</h2>
<ul>
<li><code>map()</code> typically returns a list (why?)</li>
<li>But there are variants that return different data types</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href=""></a>data_frames <span class="sc">|&gt;</span></span>
<span id="cb39-2"><a href=""></a>  <span class="fu">map_dbl</span>(nrow)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>samples tissues   dates 
     66    1475    1234 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href=""></a>count_rc <span class="ot">=</span> <span class="cf">function</span>(df) {</span>
<span id="cb41-2"><a href=""></a>  <span class="fu">tibble</span>(</span>
<span id="cb41-3"><a href=""></a>    <span class="at">n_rows =</span> <span class="fu">nrow</span>(df),</span>
<span id="cb41-4"><a href=""></a>    <span class="at">n_cols =</span> <span class="fu">ncol</span>(df)</span>
<span id="cb41-5"><a href=""></a>  )</span>
<span id="cb41-6"><a href=""></a>}</span>
<span id="cb41-7"><a href=""></a></span>
<span id="cb41-8"><a href=""></a>data_frames <span class="sc">|&gt;</span></span>
<span id="cb41-9"><a href=""></a>  <span class="fu">map_df</span>(count_rc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  n_rows n_cols
   &lt;int&gt;  &lt;int&gt;
1     66      3
2   1475      4
3   1234      6</code></pre>
</div>
</div>
</section>
<section id="exercise-simulation" class="slide level2" data-background-color="teal">
<h2>Exercise: simulation</h2>
<p>My friend is interested in whther people prefer vanilla or chocolate ice cream in San Francisco so he survyed 20 random people, 14 of which preferred vanilla. Based on the overwhelming majority in the survey, he concludes that most people in SF like vanilla.</p>
<p>Could he be wrong? Is it possible he got a lucky (or unlucky) sample and would have gotten a different answer if he repeated his survey? Let’s presume that, in reality, only 49% of people prefer vanilla (in other words, most people actually like chocolate and my friend is wrong). If we could observe that data it would look like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href=""></a>population <span class="ot">=</span> <span class="fu">tibble</span>(<span class="at">preference =</span> <span class="fu">c</span>(</span>
<span id="cb43-2"><a href=""></a>  <span class="fu">rep</span>(<span class="st">"vanilla"</span>,   <span class="fl">1e6</span> <span class="sc">*</span> <span class="fl">0.49</span>),</span>
<span id="cb43-3"><a href=""></a>  <span class="fu">rep</span>(<span class="st">"chocolate"</span>, <span class="fl">1e6</span> <span class="sc">*</span> <span class="fl">0.51</span>)</span>
<span id="cb43-4"><a href=""></a>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol type="1">
<li>Write a function that has no arguments which takes 20 random rows from this dataframe and returns whether the majority in that sample prefer vanilla (<code>TRUE</code> or <code>FALSE</code>). This simulates my friend’s survey.</li>
<li>Use <code>map</code> to run this function 500 times (<em>hint: pass 1:500 as the first argument to <code>map</code></em>) and record all the results as a logical vector</li>
<li>Take the average of the resulting logical vector to see how likely it is to get vanilla as the preferred answer in a 20-person survey even if the population preference is actually chocolate!</li>
</ol>
</section>
<section id="mapping-over-multiple-inputs" class="slide level2">
<h2>Mapping over multiple inputs</h2>
<div class="columns">
<div class="column">
<ul>
<li>So far we’ve mapped along a single input. But often you have multiple related inputs that you need iterate along in parallel. That’s the job of <code>pmap()</code>. For example, imagine you want to draw a random numbers between <code>a</code> and <code>b</code> as both of those vary:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href=""></a>a <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb44-2"><a href=""></a>b <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)</span>
<span id="cb44-3"><a href=""></a></span>
<span id="cb44-4"><a href=""></a> <span class="co"># a random number between a[1] and b[1]</span></span>
<span id="cb44-5"><a href=""></a><span class="fu">runif</span>(<span class="dv">1</span>, a[<span class="dv">1</span>], b[<span class="dv">1</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.216125</code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href=""></a><span class="co"># a random number between a[2] and b[2]</span></span>
<span id="cb46-2"><a href=""></a><span class="fu">runif</span>(<span class="dv">1</span>, a[<span class="dv">2</span>], b[<span class="dv">2</span>]) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.782127</code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href=""></a><span class="co"># a random number between a[3] and b[3]</span></span>
<span id="cb48-2"><a href=""></a><span class="fu">runif</span>(<span class="dv">1</span>, a[<span class="dv">3</span>], b[<span class="dv">3</span>]) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3.149249</code></pre>
</div>
</div>
</div><div class="column">
<ul>
<li><code>pmap</code> makes this easier:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href=""></a><span class="fu">list</span>(</span>
<span id="cb50-2"><a href=""></a>  <span class="at">a =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>),</span>
<span id="cb50-3"><a href=""></a>  <span class="at">b =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)</span>
<span id="cb50-4"><a href=""></a>) <span class="sc">|&gt;</span> <span class="fu">pmap</span>(</span>
<span id="cb50-5"><a href=""></a>  \(a,b) <span class="fu">runif</span>(<span class="dv">1</span>,a,b)</span>
<span id="cb50-6"><a href=""></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] 1.556536

[[2]]
[1] 2.965066

[[3]]
[1] 3.702769</code></pre>
</div>
</div>
<div data-align="center">
<p><img src="https://dcl-prog.stanford.edu/images/pmap-flipped.png"></p>
</div>
</div></div>
</section>
<section id="mapping-over-names" class="slide level2">
<h2>Mapping over names</h2>
<ul>
<li><code>imap()</code> lets you operate on the <strong>names</strong> of the input list.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href=""></a>grades</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$class_A
[1] 90 87 92 78 69

$class_B
[1] 88 85 76 78 77 97 91</code></pre>
</div>
</div>
</section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href=""></a>grades <span class="sc">|&gt;</span> <span class="fu">imap</span>(</span>
<span id="cb54-2"><a href=""></a>  \(value, name) </span>
<span id="cb54-3"><a href=""></a>  <span class="fu">tibble</span>(<span class="at">grade=</span>value, <span class="at">class=</span>name)</span>
<span id="cb54-4"><a href=""></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$class_A
# A tibble: 5 × 2
  grade class  
  &lt;dbl&gt; &lt;chr&gt;  
1    90 class_A
2    87 class_A
3    92 class_A
4    78 class_A
5    69 class_A

$class_B
# A tibble: 7 × 2
  grade class  
  &lt;dbl&gt; &lt;chr&gt;  
1    88 class_B
2    85 class_B
3    76 class_B
4    78 class_B
5    77 class_B
6    97 class_B
7    91 class_B</code></pre>
</div>
</div>
</section>
<section id="creating-a-grid-of-values" class="slide level2">
<h2>Creating a grid of values</h2>
<ul>
<li><code>expand_grid()</code> gives you every combination of the items in the list you pass it</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href=""></a><span class="fu">expand_grid</span>(</span>
<span id="cb56-2"><a href=""></a>    <span class="at">a =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>),</span>
<span id="cb56-3"><a href=""></a>    <span class="at">b =</span> <span class="fu">c</span>(<span class="dv">10</span>,<span class="dv">11</span>)</span>
<span id="cb56-4"><a href=""></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
      a     b
  &lt;dbl&gt; &lt;dbl&gt;
1     1    10
2     1    11
3     2    10
4     2    11
5     3    10
6     3    11</code></pre>
</div>
</div>
</section>
<section id="exercise-dimensions" class="slide level2" data-background-color="teal">
<h2>Exercise: dimensions</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href=""></a>url_start <span class="ot">=</span> <span class="st">"https://raw.githubusercontent.com/alejandroschuler/r4ds-courses/summer-2023/data/gtex_metadata/"</span></span>
<span id="cb58-2"><a href=""></a></span>
<span id="cb58-3"><a href=""></a>data_frames <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb58-4"><a href=""></a>  <span class="at">samples =</span> <span class="st">"gtex_samples_time.csv"</span>,</span>
<span id="cb58-5"><a href=""></a>  <span class="at">tissues =</span> <span class="st">"gtex_tissue_month_year.csv"</span>,</span>
<span id="cb58-6"><a href=""></a>  <span class="at">dates =</span> <span class="st">"gtex_dates_clean.csv"</span></span>
<span id="cb58-7"><a href=""></a>)  <span class="sc">|&gt;</span> </span>
<span id="cb58-8"><a href=""></a>  <span class="fu">map</span>(\(f) <span class="fu">str_c</span>(url_start, f)) <span class="sc">|&gt;</span></span>
<span id="cb58-9"><a href=""></a>  <span class="fu">map</span>(read_csv)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Fill in the missing parts of the code below to programmatically create the following table:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href=""></a>data_frames <span class="sc">|&gt;</span></span>
<span id="cb59-2"><a href=""></a>  <span class="fu">imap</span>(</span>
<span id="cb59-3"><a href=""></a>    ???</span>
<span id="cb59-4"><a href=""></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb59-5"><a href=""></a>  <span class="fu">bind_rows</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-error">
<pre><code>Error: The pipe operator requires a function call as RHS (&lt;text&gt;:8:3)</code></pre>
</div>
</div>
</section>
<section id="exercise-reading-files-in-multiple-directories" class="slide level2" data-background-color="teal">
<h2>Exercise: reading files in multiple directories</h2>
<p>My collaborator has an online folder of experimental results named <code>results</code> that can be found at <code>"https://raw.githubusercontent.com/alejandroschuler/r4ds-courses/summer-2023/data/results"</code>. In that folder, there are 20 sub-folders that represent the results of each repetition of her experiment. These sub-folders are each named <code>rep_n</code>, so, e.g.&nbsp;<code>results/rep_14</code> would be one sub-folder. Within each sub-folder, there are 3 csv files called <code>a.csv</code>, <code>b.csv</code> <code>c.csv</code> that contain different kinds of measurements. Thus, a full path to one of these files might be <code>results/rep_14/c.csv</code>.</p>
<ol type="1">
<li><p>write code to read these all into one long list of data frames. <code>str_c()</code> or <code>glue()</code> will be helpful to create the required file names</p></li>
<li><p>Unfortunately, that wasn’t helpful because now you don’t know what data frames are what results. Consider just the “<code>a</code>” files. Write code that reads in only the “<code>a</code>” files and concatenates them into one data frame. Include a column in this data frame that indicates which experimental repetition each row of the data frame came from (use <code>imap()</code>).</p></li>
<li><p>Turn your code from above into a function that takes as input the file name (<code>'a'</code>, for example) and returns the single concatenated file. Iterate that function over the different file names to output three master data frames corresponding to the file types <code>'a'</code>, <code>'b'</code>, and <code>'c'</code>.</p></li>
</ol>
</section>
<section id="why-not-for-loops" class="slide level2">
<h2>Why not for loops?</h2>
<ul>
<li>R also provides something called a <code>for</code> loop, which is common to many other languages as well. It looks like this:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href=""></a>data_frames <span class="ot">=</span> <span class="fu">list</span>(<span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>)</span>
<span id="cb61-2"><a href=""></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>) {</span>
<span id="cb61-3"><a href=""></a>  data_frames[[i]] <span class="ot">=</span> <span class="fu">read_csv</span>(urls[[i]])</span>
<span id="cb61-4"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>The <code>for</code> loop is very flexible and you can do a lot with it</li>
<li><code>for</code> loops are unavoidable when the result of one iteration depends on the result of the last iteration</li>
</ul>
</section>
<section class="slide level2">

<ul>
<li>Compare to the <code>map()</code>-style solution:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href=""></a>data_frames <span class="ot">=</span> urls <span class="sc">|&gt;</span></span>
<span id="cb62-2"><a href=""></a>  <span class="fu">map</span>(read_csv)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Compared to the <code>for</code> loop, the <code>map()</code> syntax is much more concise and eliminates much of the “admin” code in the loop (setting up indices, initializing the list that will be filled in, indexing into the data structures)</li>
<li>The <code>map()</code> syntax also encourages you to write a function for whatever is happening inside the loop. This means you have something that’s reusable and easily testable, and your code will look cleaner</li>
<li>Loops in R can be catastrophically slow due to the complexities of <a href="https://adv-r.hadley.nz/names-values.html">copy-on-modify semantics</a>.</li>
</ul>
</section></section>
<section id="purrr-cheatsheet" class="title-slide slide level1 center">
<h1>purrr Cheatsheet</h1>
<div data-align="center">
<p>&lt;img src=“https://rstudio.com/wp-content/uploads/2018/08/purrr.png”</p>
</div>
<div class="quarto-auto-generated-content">
<div class="footer footer-default">

</div>
</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="5-functional-programming_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="5-functional-programming_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="5-functional-programming_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="5-functional-programming_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="5-functional-programming_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="5-functional-programming_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="5-functional-programming_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="5-functional-programming_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="5-functional-programming_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="5-functional-programming_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': true,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>